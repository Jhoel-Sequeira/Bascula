<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Login</title>
        <link rel="shortcut icon" href="../static/img/CRN-icono.png">

        <!-- ===== JQUERY CDN ====== -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <!-- ========= SWEET ALERT CDN ======== -->
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <!-- ===== CSS LOGIN ====== -->
        <link rel="stylesheet" href="../static/css/login.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.css" integrity="sha512-FA9cIbtlP61W0PRtX36P6CGRy0vZs0C2Uw26Q1cMmj3xwhftftymr0sj8/YeezDnRwL9wtWw8ZwtCiTDXlXGjQ==" crossorigin="anonymous" referrerpolicy="no-referrer"/>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    </head>

    <body
        class="m-0 vh-100 row justify-content-center align-items-center fondo">
        <!-- Section: Design Block -->
        <section class="col text-center text-lg-start">
            <style>
                .rounded-t-5 {
                    border-top-left-radius: 0.5rem;
                    border-top-right-radius: 0.5rem;
                }

                @media(min-width: 992px) {
                    .rounded-tr-lg-0 {
                        border-top-right-radius: 0;
                    }

                    .rounded-bl-lg-5 {
                        border-bottom-left-radius: 0.5rem;
                    }
                }
            </style>
            <form action="/login" method="post">
                <div class="card m-5 mt-5">
                    <div class="row g-0 d-flex align-items-center">
                        <div class="col">
                            <img src="../static/img/CRN.ico" class=""/>
                        </div>
                        <div class="col-lg-8">
                            <div class="card-body py-5 px-md-5">

                                <form>
                                    <!-- Email input -->
                                    <div class="form-outline mb-4">
                                        <label class="form-label" for="form2Example1">Usuario</label>
                                        <input type="text" id="usuario" name="loginUser" class="form-control"/>

                                    </div>
                                    <!-- Password input -->
                                    <div class="form-outline mb-4">
                                        <label class="form-label" for="form2Example2">Contraseña</label>
                                        <div class="input-wrapper">
                                            <input type="password" id="contra" name="loginPassword" class="form-control input password"/>
                                            <i class="fa-sharp fa-solid fa-eye input-icon password" id="verContra"></i>
                                        </div>


                                    </div>
                                    <label id="mensaje_error" class="control-label col-md-12 text-danger" style="display: none;">Datos erróneos</label>

                                    <!-- Submit button -->
                                    <button type="submit" class="btn btn-primary btn-block mb-4" onclick="iniciarSesion()" style="background-color: #437413; border-color: #437413;">Iniciar sesion</button>

                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </section>
        <!-- Section: Design Block -->

    </body>
    <script>
        var button1 = document.getElementById("verContra");
       
       
        button1.addEventListener("touchstart", onlyTouch, false);
 
        function onlyTouch(ev) {
           
            $('#contra').attr('type', 'text');
        }
        button1.addEventListener("touchend", aftertouch, false);
 
        function aftertouch(ev) {
            $('#contra').attr('type', 'password');
        }
 
       
        $('#verContra').mousedown(function () {
            $('#contra').attr('type', 'text');
        });
        $('#verContra').mouseup(function () {
            $('#contra').attr('type', 'password');
        });
        function iniciarSesion(){
            $.ajax({
            url: "/login",
            type: "POST",
            data: {
                loginUser: $("#loginUser"),
                loginPassword: $("#loginPassword")

            },
            success: function (response) {
               
            },
            error: function (error) { // console.log(error);
            }
        });
        }
    </script>

</html>
{%if errorlogin == 1%}
<script>
    $("#mensaje_error").show();
    $("#mensaje_error").fadeOut(2000);
</script>

{%elif errorlogin == 2%}
<script>
    $('#mensaje_error').html('Las constraseñas no coinciden')
    $('#mensaje_error').attr('class', 'control-label col-md-12 text-danger')
    $("#mensaje_error").show();
</script>
    {%endif%}
