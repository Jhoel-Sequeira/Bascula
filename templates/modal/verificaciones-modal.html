{% for verifi in verificacion %}

<div class="modal fade" id="detalleVerificacionmodal" tabindex="-1" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-xl modal-fullscreen-lg-down">
        <div class="modal-content" style="background-color: #e4e9f7">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    Detalle de verificacion
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                    onclick="cargarLista()"></button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="id" value="{{ verifi[0] }}" />
                <div class="tab-pane fade show active mt-3" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <div class="form-group" id="detalles">
                        <div class="row mt-2">
                            <div class="col-6">
                                <div class="form-outline">
                                    <label class="form-label" for="proveedor"><strong>Proveedor </strong></label>
                                    <input type="text" id="proveedor" name="proveedor" placeholder="PO"
                                        required="required" class="form-control" disabled value="{{ verifi[6] }}" />
                                </div>
                            </div>

                            <div class="col-5">
                                <div class="form-outline">
                                    <label class="form-label" for="form3Example3"><strong>Punto de
                                            compra</strong></label>
                                    {% if (verifi[4]) and (verifi[4] != 'Sin Punto') %}

                                    <input type="text" id="puntoCompra" name="puntoCompra" placeholder="Punto de Compra"
                                        required="required" class="form-control" disabled value="{{ verifi[4] }}" />
                                    {% else %}
                                    <select class="form-select" id="puntoCompra" aria-label="Default select example">
                                        <option selected="selected" hidden>
                                            Seleccionar Punto
                                        </option>
                                        {% for punto in Punto %} {% if punto[1] != 'Sin Punto' %}
                                        <option value="{{ punto[0] }}">{{ punto[1] }}</option>
                                        {% endif %} {% endfor %}
                                    </select>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-1 mt-4 ml-6 pt-2">
                                <button type="button" class="btn btn-outline-primary" style="border: none" id="bloquear"
                                    onclick="bloquear()">
                                    <a style="text-decoration: none">Bloquear</a>
                                </button>
                            </div>
                        </div>
                        <div class="row mt-2">
                            <div class="col-6">
                                <div class="form-outline">
                                    <label class="form-label" for="form3Example3"><strong>Verificador</strong></label>
                                    {% if verifi[7] %}
                                    <input type="text" id="verificador" name="verificador" placeholder="Punto de Compra"
                                        required="required" class="form-control" disabled value="{{ verifi[7] }}" />
                                    {% else %}
                                    <select class="form-select" id="verificador" aria-label="Default select example">
                                        <option selected="selected" disabled hidden>
                                            Seleccionar Verificador
                                        </option>
                                        {% for i in Verificador %}
                                        <option value="{{ i[0] }}">{{ i[1] }}</option>
                                        {% endfor %}
                                    </select>
                                    {% endif %}

                                    <!-- <label id="mensaje_error_input_c" class="control-label col-md-12 text-danger"
                                                                                                                                                                                                                                                                                                                                                                                                        style="display: none;">Las
                                                                                                                                                                                                                                                                                                                                                                                                        constraseñas no coinciden</label> -->
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="form-outline">
                                    <label class="form-label" for="form3Example3"><strong>Digitador</strong></label>
                                    {% if verifi[8] %}
                                    <input type="text" id="digitador" name="digitador" placeholder="Punto de Compra"
                                        required="required" class="form-control" disabled value="{{ verifi[8] }}" />
                                    {% else %}
                                    <select class="form-select" id="digitador" aria-label="Default select example">
                                        <option selected="selected" hidden>
                                            Seleccionar Digitador
                                        </option>
                                        {% for i in Digitador %}
                                        <option value="{{ i[0] }}">{{ i[1] }}</option>
                                        {% endfor %}
                                    </select>
                                    {% endif %}

                                    <!-- <label id="mensaje_error_input_c" class="control-label col-md-12 text-danger"
                                                                                                                                                                                                                                                                                                                                                                                                        style="display: none;">Las
                                                                                                                                                                                                                                                                                                                                                                                                        constraseñas no coinciden</label> -->
                                </div>
                            </div>
                        </div>
                        <div id="form">
                            <div class="row mt-2">
                                <div class="col-3">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example1"><strong>PO</strong></label>
                                        {% if verifi[2] %}
                                        <input type="text" id="po" name="nombre" disabled placeholder="PO"
                                            required="required" class="form-control" value="{{ verifi[2] }}" />
                                        {% else %}
                                        <input type="text" id="po" name="nombre" placeholder="PO" required="required"
                                            class="form-control" />
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example1"><strong>Fecha</strong></label>
                                        <input type="text" id="fecha" disabled name="nombre" placeholder="nombres"
                                            required="required" class="form-control" value="{{ verifi[1] }}" />
                                        <!-- <label id="mensaje_error_input" class="control-label col-md-12 text-danger"
                                                                                                                                                                                                                                                                                                                                                                                                            style="display: block;">Las
                                                                                                                                                                                                                                                                                                                                                                                                            constraseñas no coinciden</label> -->
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example2"><strong>No Boleta</strong></label>
                                        {% if verifi[3] %}
                                        <input type="text" id="nboleta" name="nboleta" disabled placeholder="PO"
                                            required="required" class="form-control" value="{{ verifi[3] }}" />
                                        {% else %}
                                        <input type="text" id="nboleta" name="nboleta" required="required"
                                            placeholder="No Boleta" class="form-control" />
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="form-outline">
                                        <label class="form-label" for="form3Example2"><strong>Bahia</strong></label>
                                        {% if verifi[9] %}
                                        <input type="text" id="bahia" name="bahia" disabled placeholder="PO"
                                            required="required" class="form-control" value="{{ verifi[9] }}" />
                                        {% else %}
                                        <select class="form-select" id="bahia" aria-label="Default select example">
                                            <option selected="selected" hidden>
                                                Seleccionar Bahia
                                            </option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="1">4</option>
                                            <option value="2">5</option>
                                            <!-- <option value="3">6</option>
                                                                                                                                                                                                                                                                <option value="1">7</option>
                                                                                                                                                                                                                                                                <option value="2">8</option>
                                                                                                                                                                                                                                                                <option value="3">9</option>
                                                                                                                                                                                                                                                                <option value="1">10</option>
                                                                                                                                                                                                                                                                <option value="2">11</option>
                                                                                                                                                                                                                                                                <option value="3">12</option>
                                                                                                                                                                                                                                                                <option value="1">13</option>
                                                                                                                                                                                                                                                                <option value="2">14</option>
                                                                                                                                                                                                                                                                <option value="3">15</option>
                                                                                                                                                                                                                                                                <option value="1">16</option>
                                                                                                                                                                                                                                                                <option value="2">17</option>
                                                                                                                                                                                                                                                                <option value="3">18</option>
                                                                                                                                                                                                                                                                <option value="2">19</option>
                                                                                                                                                                                                                                                                <option value="3">20</option> -->
                                        </select>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-3">
                            <div class="form-outline">
                                <!-- <label class="form-label" for="form3Example3">Material</label>
                                                                                                                <select class="form-select" id="material" disabled aria-label="Default select example">
                                                                                                                    <option selected="selected" disabled hidden>Seleccionar Material</option>
                                                                                                                    {% for i in Material %}
                                                                                                                    <option value="{{ i[0] }}">{{ i[1] }}</option>
                                                                                                                    {% endfor %}
                                                                                                                </select> -->
                                <label class="form-label" for="form3Example3"><strong>Material</strong></label>
                                <input type="search" class="form-control" id="buscarmat" disabled
                                    placeholder="Buscar material..." aria-label="Buscar" />
                            </div>
                            <div style="
                  background-color: #fff;
                  position: relative;
                  height: 70%;
                  width: 100%;
                " id="totalmat">
                                <div class="info" id="listamat"></div>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="form-outline">
                                <label class="form-label" for="form3Example3"><strong>Peso Bruto</strong></label>
                                <input type="number" id="bruto" value="0" disabled maxlength="8" name="celular"
                                    required="required" class="form-control" />
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="form-outline">
                                <label class="form-label" for="form3Example3"><strong>Peso Tara</strong></label>
                                <input type="number" id="tara" value="0" disabled maxlength="8" name="celular"
                                    required="required" class="form-control" />
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="form-outline">
                                <label class="form-label" for="form3Example3"><strong>Destare</strong></label>
                                <input type="number" id="destare" disabled maxlength="8" value="0" name="celular"
                                    required="required" class="form-control" />
                            </div>
                        </div>

                        <div class="col mt-4 pt-2">
                            <button type="button" disabled id="agregar" class="btn btn-success ml-5" id="boton-enviar"
                                onclick="añadir()">
                                <i class="fas fa-calendar-check" style="margin-right: 5px"></i>Añadir
                            </button>
                            <button type="button" class="btn btn-link border-light" onclick="mostrarDetalle()">
                                <i class="fa-sharp fa-solid fa-circle-info"></i>
                            </button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col mt-3 bg-light" id="tabla-peso"></div>
                    </div>
                </div>

                <!-- INICIO DE LA FUNCIONALIDAD DE LOS BOTONES CON JQUERY  DE LA PRIMERA PANTALLA-->
                <script>
                    flagbloquear = 0;
                    inicio = 1;

                    $(document).ready(function () {
                        $("#totalmat").hide();
                        // MANDAR A LLAMAR LA TABLA

                        cargarPesos();
                        //
                        if (
                            $("#proveedor option:selected").val() !=
                            "Seleccionar Proveedor" &&
                            $("#puntoCompra option:selected").val() != "Seleccionar Punto" &&
                            $("#verificador option:selected").val() !=
                            "Seleccionar Verificador" &&
                            $("#digitador option:selected").val() !=
                            "Seleccionar Digitador" &&
                            $("#po").val() != "" &&
                            $("#fecha").val() != "" &&
                            $("#nboleta").val() != "" &&
                            $("#bahia option:selected").val() != "Seleccionar Bahia" &&
                            flagbloquear == 0 &&
                            $("#id").val() == ""
                        ) {
                            $("#proveedor").attr("disabled", "true");
                            $("#puntoCompra").attr("disabled", "true");
                            $("#verificador").attr("disabled", "true");
                            $("#digitador").attr("disabled", "true");
                            $("#po").attr("disabled", "true");
                            $("#fecha").attr("disabled", "true");
                            $("#nboleta").attr("disabled", "true");
                            $("#bahia").attr("disabled", "true");
                            $("#buscarmat").removeAttr("disabled");
                            $("#destare").removeAttr("disabled");
                            $("#bruto").removeAttr("disabled");
                            $("#tara").removeAttr("disabled");
                            $("#agregar").removeAttr("disabled");
                            $("#finalizar").removeAttr("disabled");
                            flagbloquear = 1;
                            $.ajax({
                                url: "/datosGeneralesVerificacion",
                                type: "POST",
                                data: {
                                    id: $("#id").val(),
                                    puntoCompra: $("#puntoCompra").val(),
                                    verificador: $("#verificador").val(),
                                    digitador: $("#digitador").val(),
                                    po: $("#po").val(),
                                    nboleta: $("#nboleta").val(),
                                    bahia: $("#bahia").val(),
                                },
                                success: function (response) {
                                    Swal.fire({
                                        icon: "success",
                                        title: "Exito",
                                        confirmButtonText: "Ok",
                                        text: "Verificacion registrada exitosamente",
                                    }).then((result) => {
                                        /* Read more about isConfirmed, isDenied below */
                                        if (result.isConfirmed) {
                                        }
                                    });
                                },
                                error: function (error) {
                                    // console.log(error);
                                },
                            });
                        } else if ($("#id").val() != "" && $("#po").val() != "") {
                            $("#proveedor").attr("disabled", "true");
                            $("#puntoCompra").attr("disabled", "true");
                            $("#verificador").attr("disabled", "true");
                            $("#digitador").attr("disabled", "true");
                            $("#bloquear").attr("disabled", "true");
                            $("#po").attr("disabled", "true");
                            $("#fecha").attr("disabled", "true");
                            $("#nboleta").attr("disabled", "true");
                            $("#bahia").attr("disabled", "true");
                            $("#buscarmat").removeAttr("disabled");
                            $("#destare").removeAttr("disabled");
                            $("#bruto").removeAttr("disabled");
                            $("#tara").removeAttr("disabled");
                            $("#agregar").removeAttr("disabled");
                            $("#finalizar").removeAttr("disabled");
                            $("#detalles").hide();
                        } else if (
                            !(
                                $("#proveedor option:selected").val() !=
                                "Seleccionar Proveedor" &&
                                $("#puntoCompra option:selected").val() !=
                                "Seleccionar Punto" &&
                                $("#verificador option:selected").val() !=
                                "Seleccionar Verificador" &&
                                $("#digitador option:selected").val() !=
                                "Seleccionar Digitador" &&
                                $("#po").val() != "" &&
                                $("#fecha").val() != "" &&
                                $("#nboleta").val() != "" &&
                                $("#bahia option:selected").val() != "Seleccionar Bahia" &&
                                flagbloquear != 0
                            ) &&
                            inicio == 2
                        ) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos faltantes",
                                confirmButtonText: "Ok",
                                text: "Debe Añadir los datos faltantes",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        }
                    });

                    $(document).on("change", "#proveedor", function (event) {
                        valor = $("#proveedor option:selected").val();
                    });

                    function bloquear() {
                        if (
                            $("#proveedor option:selected").val() !=
                            "Seleccionar Proveedor" &&
                            $("#puntoCompra option:selected").val() != "Seleccionar Punto" &&
                            $("#verificador option:selected").val() !=
                            "Seleccionar Verificador" &&
                            $("#digitador option:selected").val() !=
                            "Seleccionar Digitador" &&
                            $("#po").val() != "" &&
                            $("#fecha").val() != "" &&
                            $("#nboleta").val() != "" &&
                            $("#bahia option:selected").val() != "Seleccionar Bahia" &&
                            flagbloquear == 0 &&
                            $("#id").val() != ""
                        ) {
                            $("#proveedor").attr("disabled", "true");
                            $("#puntoCompra").attr("disabled", "true");
                            $("#verificador").attr("disabled", "true");
                            $("#digitador").attr("disabled", "true");
                            $("#po").attr("disabled", "true");
                            $("#fecha").attr("disabled", "true");
                            $("#nboleta").attr("disabled", "true");
                            $("#bahia").attr("disabled", "true");
                            $("#buscarmat").removeAttr("disabled");
                            $("#destare").removeAttr("disabled");
                            $("#bruto").removeAttr("disabled");
                            $("#tara").removeAttr("disabled");
                            $("#agregar").removeAttr("disabled");
                            $("#finalizar").removeAttr("disabled");
                            flagbloquear = 1;
                            $.ajax({
                                url: "/datosGeneralesVerificacion",
                                type: "POST",
                                data: {
                                    id: $("#id").val(),
                                    puntoCompra: $("#puntoCompra").val(),
                                    verificador: $("#verificador").val(),
                                    digitador: $("#digitador").val(),
                                    po: $("#po").val(),
                                    nboleta: $("#nboleta").val(),
                                    bahia: $("#bahia").val(),
                                },
                                success: function (response) {
                                    Swal.fire({
                                        icon: "success",
                                        title: "Exito",
                                        confirmButtonText: "Ok",
                                        text: "Verificacion registrada exitosamente",
                                    }).then((result) => {
                                        /* Read more about isConfirmed, isDenied below */
                                        if (result.isConfirmed) {
                                        }
                                    });
                                },
                                error: function (error) {
                                    // console.log(error);
                                },
                            });
                        } else if (
                            $("#id").val() != "" &&
                            $("#po").val() != "" &&
                            flagbloquear == 1
                        ) {
                            $("#proveedor").attr("disabled", "true");
                            $("#puntoCompra").attr("disabled", "true");
                            $("#verificador").attr("disabled", "true");
                            $("#digitador").attr("disabled", "true");
                            $("#po").attr("disabled", "true");
                            $("#fecha").attr("disabled", "true");
                            $("#nboleta").attr("disabled", "true");
                            $("#bahia").attr("disabled", "true");
                            $("#buscarmat").removeAttr("disabled");
                            $("#destare").removeAttr("disabled");
                            $("#bruto").removeAttr("disabled");
                            $("#tara").removeAttr("disabled");
                            $("#agregar").removeAttr("disabled");
                            $("#finalizar").removeAttr("disabled");
                        } else if (
                            !(
                                $("#proveedor option:selected").val() !=
                                "Seleccionar Proveedor" &&
                                $("#puntoCompra option:selected").val() !=
                                "Seleccionar Punto" &&
                                $("#verificador option:selected").val() !=
                                "Seleccionar Verificador" &&
                                $("#digitador option:selected").val() !=
                                "Seleccionar Digitador" &&
                                $("#po").val() != "" &&
                                $("#fecha").val() != "" &&
                                $("#nboleta").val() != "" &&
                                $("#bahia option:selected").val() != "Seleccionar Bahia" &&
                                flagbloquear != 0
                            )
                        ) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos faltantes",
                                confirmButtonText: "Ok",
                                text: "Debe Añadir los datos faltantes",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        }
                    }
                    function mostrarDetalle() {
                        if ($("#detalles").is(":hidden")) $("#detalles").show();
                        else $("#detalles").hide();
                    }
                    function cargarPesos() {
                        $.ajax({
                            url: "/listaPesos",
                            type: "POST",
                            data: {
                                id: $("#id").val(),
                            },
                            success: function (response) {
                                $("#tabla-peso").html(response);
                                $("#tabla-peso").append(response.htmlresponse);
                            },
                            error: function (error) {
                                // console.log(error);
                            },
                        });
                    }
                    // Funcion para poner lista de resultados
                    var buscarMaterial = function () {
                        var material = $("#buscarmat").val();
                        if (material != "") {
                            $.ajax({
                                url: "/buscarMaterial",
                                type: "POST",
                                data: {
                                    material: material,
                                },
                                success: function (response) {
                                    if (response == "No") {
                                    } else {
                                        $("#listamat").html(response);
                                        $("#listamat").append(response.htmlresponse);
                                        $("#totalmat").show();
                                        $("#listamat").show();

                                        $("#busqueda button[name=det]").click(function () {
                                            $("#buscarmat").val($(this).text());
                                            $("#listamat").hide();
                                            $("#totalmat").hide();
                                        });
                                    }
                                },
                                error: function (error) {
                                    // console.log(error);
                                },
                            });
                        } else {
                            $("#listamat").hide();
                            $("#totalmat").hide();
                        }
                    };
                    $("#buscarmat").on("keyup", buscarMaterial);

                    function añadir() {
                        var bruto = parseInt($("#bruto").val());
                        var tara = parseInt($("#tara").val());
                        var destare = parseInt($("#destare").val());
                        if (
                            $("#buscarmat").val() == "" ||
                            $("#bruto").val() == "" ||
                            $("#tara").val() == "" ||
                            $("#destare").val() == ""
                        ) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos faltantes",
                                confirmButtonText: "Ok",
                                text: "Debe Añadir los datos faltantes",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        } else if (bruto < 0 || tara < 0 || destare < 0) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos Invalidos",
                                confirmButtonText: "Ok",
                                text: "El valor de los pesos es menor a 0.",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        } else if (tara >= bruto || tara <= destare) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos Invalidos",
                                confirmButtonText: "Ok",
                                text: "El valor de la tara es invalido.",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        } else if (destare >= bruto - tara) {
                            Swal.fire({
                                icon: "error",
                                title: "Datos Invalidos",
                                confirmButtonText: "Ok",
                                text: "El valor del destare no puede ser mayor o igual a la resta P.bruto - P.tara.",
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                }
                            });
                        } else {
                            $.ajax({
                                url: "/insertarPesos",
                                type: "POST",
                                data: {
                                    id: $("#id").val(),
                                    material: $("#buscarmat").val(),
                                    destare: $("#destare").val(),
                                    pBruto: $("#bruto").val(),
                                    pTara: $("#tara").val(),
                                },
                                success: function (response) {
                                    $("#tabla-peso").html(response);
                                    $("#tabla-peso").append(response.htmlresponse);
                                    $("#buscarmat").val("");
                                    $("#bruto").val(0);
                                    $("#tara").val(0);
                                    $("#destare").val(0);
                                    $("#agregar").removeAttr("disabled");
                                },
                                error: function (error) {
                                    // console.log(error);
                                },
                            });
                        }
                    }
                </script>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="finalizar" disabled onclick="finalizar()">
                    Guardar
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    var bruto = parseInt($("#bruto").val());
    var tara = parseInt($("#tara").val());
    var destare = parseInt($("#destare").val());
    $(document).ready(function () {
        $("#bruto").val(0);
        $("#tara").val(0);
        $("#destare").val(0);
    });

    //VALIDACION TARA
    //   $("#bruto").on("keyup", function () {
    //     var bruto1 = parseInt($("#bruto").val());
    //     var tara1 = parseInt($("#tara").val());
    //     var destare1 = parseInt($("#destare").val());
    //     var resta = bruto1 - tara1;

    //     if (bruto1 < 0) {
    //       $("#mensaje_error_peso_bruto").html("El peso no puede ser 0 o inferior.");
    //       $("#mensaje_error_peso_destare").show();
    //     } else if (tara1 > bruto1) {
    //       $("#mensaje_error_peso_bruto").html(
    //         "El peso no puede ser igual o menor al peso tara."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else if (bruto1 <= destare1) {
    //       $("#mensaje_error_peso_bruto").html(
    //         "El peso no puede ser menor al destare."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else if (bruto1 - tara1 < destare1) {
    //       $("#mensaje_error_peso_bruto").html(
    //         "El destare no puede ser mayor a la resta de la tara y el peso bruto."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else {
    //       $("#mensaje_error_peso_destare").hide();
    //       $("#mensaje_error_peso_bruto").hide();
    //       $("#mensaje_error_peso_tara").hide();
    //     }
    //   });
    //   function validartara() {
    //     var bruto1 = parseInt($("#bruto").val());
    //     var tara1 = parseInt($("#tara").val());
    //     var destare1 = parseInt($("#destare").val());
    //     var resta = bruto1 - tara1;

    //     if (tara1 < 0) {
    //       $("#mensaje_error_peso_tara").html("El peso no puede ser 0 o inferior.");
    //       $("#mensaje_error_peso_tara").show();
    //     } else if (tara1 > bruto1) {
    //       $("#mensaje_error_peso_tara").html(
    //         "El peso no puede ser igual o mayor al peso bruto."
    //       );
    //       $("#mensaje_error_peso_tara").show();
    //     } else if (tara1 <= destare1) {
    //       $("#mensaje_error_peso_tara").html(
    //         "El peso no puede ser menor al destare."
    //       );
    //       $("#mensaje_error_peso_tara").show();
    //     } else if (bruto1 - tara1 < destare1) {
    //       $("#mensaje_error_peso_tara").html(
    //         "El destare no puede ser mayor a la resta de la tara y el peso bruto."
    //       );
    //       $("#mensaje_error_peso_tara").show();
    //     } else {
    //       $("#mensaje_error_peso_destare").hide();
    //       $("#mensaje_error_peso_bruto").hide();
    //       $("#mensaje_error_peso_tara").hide();
    //     }
    //   }
    //   $("#tara").on("keyup", validartara);
    //   $("#destare").on("keyup", function () {
    //     var bruto2 = parseInt($("#bruto").val());
    //     var tara2 = parseInt($("#tara").val());
    //     var destare2 = parseInt($("#destare").val());
    //     if (destare2 < 0) {
    //       $("#mensaje_error_peso_destare").html(
    //         "El peso no puede ser 0 o inferior."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else if (destare2 >= bruto2 || destare2 >= tara2) {
    //       $("#mensaje_error_peso_destare").html(
    //         "El peso no puede ser igual o mayor al peso bruto ni destare."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else if (bruto2 - tara2 <= destare2) {
    //       $("#mensaje_error_peso_destare").html(
    //         "El destare no puede ser mayor a la resta de la tara y el peso bruto."
    //       );
    //       $("#mensaje_error_peso_destare").show();
    //     } else {
    //       $("#mensaje_error_peso_destare").hide();
    //       $("#mensaje_error_peso_bruto").hide();
    //       $("#mensaje_error_peso_tara").hide();
    //     }
    //   });
    //###########################
    function finalizar() {
        Swal.fire({
            title: "¿Desea guardar?",
            text: "Se imprimira una factura con los detalles",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: "Sí, aceptar",
            cancelButtonText: "Cancelar"
        }).then(resultado => {
            if (resultado.value) {
                $.ajax({
                    url: "/eliminarProveedor",
                    type: "POST",
                    data: {
                        id: id
                    },
                    success: function (response) {
                        if (response == "done") {
                            $.ajax({
                                url: "/finalizarVerificacion",
                                type: "POST",
                                data: {
                                    id: $("#id").val(),
                                },
                                success: function (response) {
                                    if (response == "vacio") {
                                        Swal.fire({
                                            icon: "warning",
                                            title: "Datos faltantes",
                                            confirmButtonText: "Ok",
                                            text: "Esta verificacion no posee pesajes",
                                        }).then((result) => {
                                            /* Read more about isConfirmed, isDenied below */
                                            if (result.isConfirmed) {
                                            }
                                        });
                                    } else {
                                        $("#factura").html(response);
                                        $("#factura").append(response.htmlresponse);
                                        // Escuchamos el click del botón
                                        elementoParaConvertir = document.querySelector(".div-verpdf"); // <-- Aquí puedes elegir cualquier elemento del DOM
                                        elementoParaConvertir.style.display = "block";
                                        html2pdf()
                                            .set({
                                                filename: "Factura.pdf",
                                                image: {
                                                    type: "jpeg",
                                                    quality: 0.98,
                                                },
                                                html2canvas: {
                                                    scale: 5, // A mayor escala, mejores gráficos, pero más peso
                                                    letterRendering: false,
                                                },
                                                jsPDF: {
                                                    unit: "in",
                                                    format: "a4",
                                                    orientation: "portrait", // landscape o portrait
                                                },
                                            })
                                            .from(elementoParaConvertir)
                                            .save();
                                        setTimeout(() => {
                                            elementoParaConvertir.style.display = "none";
                                            Swal.fire("Factura Impresa!", "", "success");
                                            window.location = "/home";
                                        }, 1000);
                                    }
                                },
                                error: function (error) {
                                    // console.log(error);
                                },
                            });

                        }
                    },
                    error: function (error) { // console.log(error);
                    }
                });
            } else { // Dijeron que no
                console.log("*NO se elimina la venta*");
            }
        });

    }
</script>

{% endfor %}